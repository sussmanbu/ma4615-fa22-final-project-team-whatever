---
title: Analysis
description: 
toc: true
featuredVideo:
featuredImage: images/globe.png
draft: false
--- 


<div id="TOC">

</div>

<p>We describe here our detailed data analysis. Most of our data for analysis is accredited to UNICEF database.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.1      ✔ stringr 1.4.1 
## ✔ readr   2.1.2      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(ggplot2)
print(getwd())</code></pre>
<pre><code>## [1] &quot;/Users/anamariapananas/Data Science/ma4615-fa22-final-project-team-whatever/content&quot;</code></pre>
<pre class="r"><code>load(here::here(&quot;dataset/income_mortality.RData&quot;))
load(here::here(&quot;dataset/nd_regions.RData&quot;))
load(here::here(&quot;dataset/nd_inc_mort_avg.RData&quot;))
print(ls())</code></pre>
<pre><code>## [1] &quot;income_mortality&quot; &quot;nd_inc_mort_avg&quot;  &quot;nd_regions&quot;</code></pre>
<div id="our-motivation-for-analysis" class="section level2">
<h2>Our Motivation for Analysis</h2>
<p>Our data is mainly driven by investigating the state of the world’s children under the age of 5. Through our analysis, we will have a better idea of how influential our chosen variables are to the survival and health of children around the world.</p>
<p>Some variables we are most interested in include:</p>
<pre><code>* Nutrition
* Low birth weight 
* Minimum diet diversity(6-23months)
* Minimum meal frequency(6-23months)
* Zero vegetable or fruit consumption (6-23months)
+ Mortality Rate 
        * Includes years 1950 - 2020
+ Income per capita</code></pre>
<p>With these variables, we hope to learn more about the connection between economics, nutrition, and child mortality across regions. We can also try to get some idea as to what triggers a higher child mortality rate in particular nations with respect to the variables above. Then, we could compare the differences with countries with a lower rate. As a result, it might be possible to pinpoint improvements that could be made to the children’s living circumstances as well as the areas where making changes would have the greatest potential to save young lives.</p>
</div>
<div id="initial-questions" class="section level2">
<h2>Initial Questions</h2>
<ol style="list-style-type: decimal">
<li>What are the differences in low birthweight between each world region?</li>
<li>What is the relationship over time between mortality rates for children under the age of 5?</li>
<li>Does income have a significant contribution to the characteristics of a country with lower mortality rates?</li>
<li>What are some relationships between nutrition variables, such as exclusive breast feeding rate and the average income per capita per region?</li>
<li>As the income increases, does diet diversity also increase for the children’s nutrition?</li>
</ol>
</div>
<div id="flaws-and-limitations-of-analysis" class="section level2">
<h2>Flaws and Limitations of Analysis</h2>
<p>One unfortunate limitation is that the Nutrition data set does not have an extensive time series like the Mortality rates data set. So, if our combined data set for nutrition/income/mortality, we are unable to have a variable for years. We combined data from more than 150 countries across the three tables that left us with some usable information.</p>
<p>Not having an appropriate amount of values in the nutrition data for some variables also limits us to have an equitable representation of these variables.</p>
<p>We are also limited in saying that certain factors are what “cause” lower nutritional values in countries, because since we are looking at country-wide data, there will inevitably be many factors that are potential contributers. But for our project, we hope to be able to create a profile using the variables we chose and be able to predict the nutritional or mortality status of a country based on these chosen factors.</p>
<p>*Add more here</p>
</div>
<div id="figure-one-low-birthweight-in-each-region" class="section level2">
<h2>Figure one: Low Birthweight in each Region</h2>
<p>Here, we wanted to give a visual to represent the percentage variability in low birthweight among these regions. Based on the bar chart, South Asia has a visible larger percentage of children that fall in this category. Moving forward, we will keep an eye on South Asia and the relationships that may have impacted this one.</p>
<pre class="r"><code>ggplot(nd_regions, aes(Country , LowBirthWT,  fill=Country)) + 
    coord_flip() +
    geom_bar(stat=&quot;identity&quot;, width=.90) + 
    xlab(&quot;Region&quot;) + 
    ylab(&quot;Low Birth Weight Percentage&quot;) + 
    guides(fill=FALSE) +
    ggtitle(&quot;Percentage of Children Underweight in World Regions&quot;) + 
    theme_minimal()</code></pre>
<pre><code>## Warning: `guides(&lt;scale&gt; = FALSE)` is deprecated. Please use `guides(&lt;scale&gt; =
## &quot;none&quot;)` instead.</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="figure-two-mortality-rates-and-income-per-capita" class="section level2">
<h2>Figure Two: Mortality Rates and Income per Capita</h2>
<p>This figure shows that over time, mortality rates have decreased. (We realize that the colors for income may be difficult to decipher, so we may edit the color to regions.)</p>
<pre class="r"><code>load(here::here(&quot;dataset/income_mortality.RData&quot;))

#maybe need to include different regions and color them with &quot;color = &quot; under ggplot aes (instead of Income)

income_mortality %&gt;% filter(Year == &quot;1950&quot; | Year == &quot;1975&quot; | Year == &quot;2000&quot; | Year == &quot;2020&quot;) %&gt;% ggplot(aes(x = Income, y = Mortality, color = Income)) + geom_point(size = 0.3) +
  facet_wrap(~as.factor(Year)) +
  stat_smooth(aes(group = Year), color=&#39;black&#39;, alpha = 0.4, geom = &quot;line&quot;) +
  scale_x_log10() +
  labs(x = &quot;Income Per Capita (PPP)&quot;, y = &quot;Under 5 Mortality Rate&quot;, title = &quot;Disparity across Under 5 Mortality Rates has decreased over time&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 140 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 140 rows containing missing values (geom_point).</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="figure-three" class="section level2">
<h2>Figure Three</h2>
<pre class="r"><code>load(here::here(&quot;dataset/income_mortality.RData&quot;))

#load(here::here(&quot;static/load_and_clean_data.R&quot;))
suppressPackageStartupMessages(library(tidyverse))

#maybe need to include different regions and color them with &quot;color = &quot; under ggplot aes (instead of Income)

income_mortality %&gt;% filter(Year == &quot;1950&quot; | Year == &quot;1975&quot; | Year == &quot;2000&quot; | Year == &quot;2020&quot;) %&gt;% ggplot(aes(x = Income, y = Mortality, color = Income)) + geom_point(size = 0.3) +
  facet_wrap(~as.factor(Year)) +
  stat_smooth(aes(group = Year), color=&#39;black&#39;, alpha = 0.4, geom = &quot;line&quot;) </code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 140 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 140 rows containing missing values (geom_point).</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="figure-four-relationship-between-income-and-infants-that-are-exclusively-breastfed" class="section level2">
<h2>Figure Four: Relationship between Income and Infant’s that are exclusively breastfed</h2>
<p>This is our first attempt at exploring a variable from the nutrition data set with income per capita. Here we are able to see that as income increases, exclusive breast feeding for children’s nutrition decreases. Exclusive breast feeding, according to this data, is described as the</p>
<pre><code>&gt; Percentage of infants 0-5 months of age who were fed exclusively with breastmilk during the previous day.</code></pre>
<p>This relationship with income could signify that higher income regions are more likely to have alternatives to breastfeeding for infants. Of course this is just a hypothesis, but a question to keep in mind.</p>
<pre class="r"><code>load(here::here(&quot;dataset/nd_inc_mort_avg.RData&quot;))
ggplot(nd_inc_mort_avg, aes(x = Income_avg, y = ExclusiveBreastFeeding)) + geom_point(size = 0.4) +
  stat_smooth(color=&#39;black&#39;, alpha = 0.2) +

  scale_x_log10() +
  labs(x = &quot;Average Income Per Capita (PPP)&quot;, y = &quot;Exclusive Breast Feeding Rate&quot;, title = &quot;As income increases, exclusive breast feeding for children&#39;s nutrition decreases&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 53 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 53 rows containing missing values (geom_point).</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-5-1.png" width="672" />
</p>
</div>
<div id="figure-five-relationship-between-income-per-capita-and-child-diet-diversity" class="section level2">
<h2>Figure Five: Relationship between Income per capita and Child Diet Diversity</h2>
<p>Below is a figure that suggets that the diet diversity variable steadily increases as the average income per capita increases.
Minimum diet diversity, according to the data, is defined as:</p>
<pre><code>&gt;Percentage of children who received foods from at least 5 out of 8 defined food groups during the previos day. </code></pre>
<p>With this in mind, a possible synthesis is that higher averages of income provide more opportunities to fulfill the diet for all 8 defined food groups.</p>
<pre class="r"><code>load(here::here(&quot;dataset/nd_inc_mort_avg.RData&quot;))
ggplot(nd_inc_mort_avg, aes(x = Income_avg, y = DietDiversity)) + geom_point(size = 0.4) +
  stat_smooth(color=&#39;black&#39;, alpha = 0.2) +
  scale_x_log10() +
  labs(x = &quot;Average Income Per Capita (PPP)&quot;, y = &quot;Diet Diversity&quot;, title = &quot;As income increases, diet diversity for children&#39;s nutrition increases&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 93 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 93 rows containing missing values (geom_point).</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>library(maps)</code></pre>
<pre><code>## 
## Attaching package: &#39;maps&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     map</code></pre>
<pre class="r"><code>library(ggplot2)
library(RColorBrewer)
library(tidyverse)

world_map &lt;- map_data(&quot;world&quot;)

ggplot(world_map, aes(x = long, y = lat, group = group)) +
  geom_polygon(fill=&quot;white&quot;, colour = &quot;gray50&quot;) +
  theme_classic()</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r"><code>world_map %&gt;%
  left_join(income_mortality, by = c(&quot;region&quot; = &quot;Country&quot;)) -&gt; act_world_map</code></pre>
<pre class="r"><code>act_world_map1970 &lt;- act_world_map %&gt;% filter(Year == c(&quot;1970&quot;))</code></pre>
<pre class="r"><code>ggplot(act_world_map1970,aes(x = long, y = lat, group = group))+
  geom_polygon(aes(fill = Mortality),color = &quot;white&quot;)+
  scale_x_continuous(breaks = seq(-180,210,45),labels = function(x){paste0(x,&quot;°&quot;)})+
  scale_y_continuous(breaks = seq(-60, 100, 30), labels = function(x){paste0(x, &quot;°&quot;)})+
  scale_fill_gradient(low = &quot;lightblue&quot;, high=&quot;dark blue&quot;) +
  theme_light()</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre class="r"><code>act_world_map1990 &lt;- act_world_map %&gt;% filter(Year == c(&quot;1990&quot;))</code></pre>
<pre class="r"><code>ggplot(act_world_map1990,aes(x = long, y = lat, group = group))+
  geom_polygon(aes(fill = Mortality),color = &quot;white&quot;)+
  scale_x_continuous(breaks = seq(-180,210,45),labels = function(x){paste0(x,&quot;°&quot;)})+
  scale_y_continuous(breaks = seq(-60, 100, 30), labels = function(x){paste0(x, &quot;°&quot;)})+
  scale_fill_gradient(low = &quot;lightblue&quot;, high=&quot;dark blue&quot;) +
  theme_light()</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre class="r"><code>act_world_map2000 &lt;- act_world_map %&gt;% filter(Year == c(&quot;2000&quot;))</code></pre>
<pre class="r"><code>ggplot(act_world_map2000,aes(x = long, y = lat, group = group))+
  geom_polygon(aes(fill = Mortality),color = &quot;white&quot;)+
  scale_x_continuous(breaks = seq(-180,210,45),labels = function(x){paste0(x,&quot;°&quot;)})+
  scale_y_continuous(breaks = seq(-60, 100, 30), labels = function(x){paste0(x, &quot;°&quot;)})+
  scale_fill_gradient(low = &quot;lightblue&quot;, high=&quot;dark blue&quot;) +
  theme_light()</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>
<div id="clarity-figures" class="section level2">
<h2>Clarity Figures</h2>
<p>*delete below?</p>
<pre class="r"><code># Interesting structure for visualizing mortality rates by world regions when we&#39;ll have the world regions variable in the income_mortality data set

 #ggplot(nd_regions, aes(x=Country, y=LowBirthWT, color=Country)) +
     #geom_point(position=&quot;jitter&quot;) +
     #coord_polar(&quot;x&quot;) +
     #labs(title=&quot;% of Low Birth Weights by World Region&quot;, x=&quot;&quot;, y=&quot;&quot;, color =&quot;Country&quot; )</code></pre>
</div>
<div id="figure-six" class="section level2">
<h2>Figure Six</h2>
<pre class="r"><code>data(income_mortality)</code></pre>
<pre><code>## Warning in data(income_mortality): data set &#39;income_mortality&#39; not found</code></pre>
<pre class="r"><code>a &lt;- cbind(income_mortality$&#39;Mortality&#39;, income_mortality$&#39;Income&#39;)
a2&lt;-na.omit(a)
cor = cor(a2[,1],a2[,2])
#the correlationship between the mortality and income 
print(cor)</code></pre>
<pre><code>## [1] -0.4771973</code></pre>
<pre class="r"><code>ggplot(data = income_mortality, mapping = aes(x = income_mortality$&#39;Year&#39;, y = income_mortality$&#39;Mortality&#39;)) +
    geom_point(alpha = 0.1, aes(color = &#39;azure&#39;))</code></pre>
<pre><code>## Warning: Use of `income_mortality$Year` is discouraged. Use `Year` instead.</code></pre>
<pre><code>## Warning: Use of `income_mortality$Mortality` is discouraged. Use `Mortality`
## instead.</code></pre>
<pre><code>## Warning: Removed 1704 rows containing missing values (geom_point).</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = income_mortality, mapping = aes(x = income_mortality$&#39;Year&#39;, y = income_mortality$&#39;Income&#39;)) +
    geom_point(alpha = 0.1, aes(color = &#39;Red&#39;))</code></pre>
<pre><code>## Warning: Use of `income_mortality$Year` is discouraged. Use `Year` instead.</code></pre>
<pre><code>## Warning: Use of `income_mortality$Income` is discouraged. Use `Income` instead.</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-16-2.png" width="672" /></p>
<pre class="r"><code>ggplot(data = income_mortality, mapping = aes(x = income_mortality$&#39;Mortality&#39;, y = income_mortality$&#39;Income&#39;)) +
    geom_point(alpha = 0.1, aes(color = &#39;Red&#39;))</code></pre>
<pre><code>## Warning: Use of `income_mortality$Mortality` is discouraged. Use `Mortality` instead.
## Use of `income_mortality$Income` is discouraged. Use `Income` instead.</code></pre>
<pre><code>## Warning: Removed 1704 rows containing missing values (geom_point).</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-16-3.png" width="672" /></p>
</div>
<div id="figure-seven" class="section level2">
<h2>Figure Seven</h2>
<pre class="r"><code>load(here::here(&quot;dataset/inc_mort_vax.RData&quot;))
ggplot(inc_mort_vax, aes(x = Vax_Rate, y = Mortality)) + geom_point(size = 0.4) +
  stat_smooth(color=&#39;black&#39;, alpha = 0.2) +
  labs(x = &quot;Vax Rate for at least one disease, 1 y/o children&quot;, y = &quot;Under 5 Mortality&quot;, title = &quot;Vaccination Rates are negatively correlated with Under 5 Mortality Rates&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 544 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 544 rows containing missing values (geom_point).</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="r"><code>inc_mort_vax %&gt;% filter(Year == &quot;1980&quot; | Year == &quot;1990&quot; | Year == &quot;2000&quot; | Year == &quot;2019&quot;) %&gt;% ggplot(aes(x = Vax_Rate, y = Mortality, color = Income)) + geom_point(size = 0.3) +
  facet_wrap(~as.factor(Year)) +
  stat_smooth(aes(group = Year), color=&#39;black&#39;, alpha = 0.4, geom = &quot;line&quot;) +
  labs(x = &quot;Vax Rate for at least one disease, 1 y/o children&quot;, y = &quot;Under 5 Mortality Rate&quot;, title = &quot;Vaccination Rates have increased over time, while Under 5 Mortality Rates fell&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 113 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 113 rows containing missing values (geom_point).</code></pre>
<p><img src="/analysis_files/figure-html/unnamed-chunk-17-2.png" width="672" /></p>
</div>
<div id="modeling-and-inference" class="section level2">
<h2>Modeling and Inference</h2>
<p>Here is where we will show our process for the linear model.</p>
<p>Rubric:
You should also include some kind of formal statistical model and/or inference.</p>
<p>This could be a linear regression, logistic regression, hypothesis testing etc.</p>
<p>Explain the techniques you used for validating your results.</p>
<p>Describe the results of your modelling and make sure to give a sense of the uncertainty in your estimates and conclusions.”</p>
</div>
